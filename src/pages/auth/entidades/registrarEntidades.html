<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--Font Awesome-->
    <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css' rel='stylesheet'>

    <!-- boostrap Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.5.0/font/bootstrap-icons.min.css">

    <!-- Estilos -->
    <link href="../../../output.css" rel="stylesheet">

    <title>Registrar Entidades</title>
</head>
<body class="bg-slate-900 text-gray-300">
    <main>
        <section class="min-h-screen flex items-center justify-center p-6">
            <div class="w-96 bg-slate-700 p-10 rounded-lg">
                <h1 class="font-black text-center text-3xl mb-7 tracking-[5px]">Registrar <span class="text-sky-600">Entidades</span></h1>

                <form id="formulario" class="formulario flex flex-col items-center justify-center gap-3 text-lg">
                    <!-- Nombre -->
                    <div class="w-full mb-4">
                        <label for="nombre" class="flex font-semibold gap-2 justify-center items-center mb-4 tracking-[5px]"><i class="bi bi-building"></i>Nombre del colegio</label>
                        <input type="text" name="nombre" id="nombre" class="w-full rounded-md p-2 text-stone-600 font-medium inputText" placeholder="Nombre del colegio">
                        <span class="error-message text-red-600 hidden"></span>
                    </div>                                        
                    <!-- Direccion -->
                    <div class="w-full mb-4">
                        <label for="direccion" class="flex font-semibold gap-2 justify-center items-center mb-4 tracking-[5px]"><i class="fa-regular fa-address-book"></i>Dirección</label>
                        <input type="text" id="direccion" name="direccion" class="w-full rounded-md p-2 text-stone-600 font-medium inputText" placeholder="Dirección del colegio">
                        <span class="error-message text-red-600 hidden"></span>
                    </div>                    
                    <!-- Telefono -->
                    <div class="w-full mb-4">
                        <label for="telefono" class="flex font-semibold gap-2 justify-center items-center mb-4 tracking-[5px]"><i class="bi bi-phone"></i>Telefono</label>
                        <input type="text" id="telefono" name="telefono" class="w-full rounded-md p-2 text-stone-600 font-medium" placeholder="Telefono del colegio">
                        <span class="error-message text-red-600 hidden"></span>
                    </div>
                    <!-- Email -->
                    <div class="w-full mb-4">
                        <label for="email" class="flex font-semibold gap-2 justify-center items-center mb-4 tracking-[5px]"><i class="fa-regular fa-envelope"></i>Correo</label>
                        <input type="email" id="email" name="email" class="w-full rounded-md p-2 text-stone-600 font-medium" placeholder="Correo del colegio">
                        <span class="error-message text-red-600 hidden"></span>
                    </div> 
                    <!-- Director -->
                    <div class="w-full mb-4">
                        <label for="director" class="flex font-semibold gap-2 justify-center items-center mb-4 tracking-[5px]"><i class="fa-regular fa-user"></i>Director</label>
                        <input type="text" id="director" name="director" class="w-full rounded-md p-2 text-stone-600 font-medium inputText" placeholder="Nombre del director">
                        <span class="error-message text-red-600 hidden"></span>
                    </div>
                    <!-- Departamentos -->
                    <div class="w-full mb-4">
                        <label for="departamento" class="flex font-semibold gap-2 justify-center items-center mb-4 tracking-[5px]"><i class="bi bi-geo-alt"></i>Departamento</label>
                        <select id="departamento" name="departamento" class="w-full py-2 px-4 outline-none rounded-lg bg-slate-900 appearance-none select">
                            <option value="">Cargando departamentos...</option>              
                        </select>
                        <span class="error-message text-red-600 hidden"></span>
                    </div>
                    <!-- Municipios -->
                    <div class="w-full mb-4">
                        <label for="capitales" class="flex font-semibold gap-2 justify-center items-center mb-4 tracking-[5px]"><i class="bi bi-geo-alt"></i>Capitales</label>
                        <select id="municipio" name="municipio" class="w-full py-2 px-4 outline-none rounded-lg bg-slate-900 appearance-none select">
                            <option value="">Seleccione una municipio</option>                      
                        </select>
                        <span class="error-message text-red-600 hidden"></span>
                    </div> 
                    <!-- Estado -->
                    <div class="w-full mb-4">
                        <label for="estado" class="flex font-semibold gap-2 justify-center justify-cent mb-4er items-center mb-4 tracking-[5px]"><i class="bi bi-geo-alt"></i>Estado</label>
                        <select id="estado" name="estado" class="w-full py-2 px-4 outline-none rounded-lg bg-slate-900 appearance-none select">
                            <option value="">Seleccione una opción</option>
                            <option value="1">Activo</option>
                            <option value="0">Inactivo</option>
                        </select>
                        <span class="error-message text-red-600 hidden"></span>
                    </div>
                    <!-- Secretaria -->
                    <div class="w-full mb-4">
                        <label for="secretaria" class="flex font-semibold gap-2 justify-center items-center mb-4 tracking-[5px]"><i class="bi bi-geo-alt"></i>Secretaría</label>
                        <input type="text" class="w-full rounded-md p-2 text-stone-600 font-medium inputText" name="secretaria" id="secretaria" placeholder="Nombre de la secretaría">                      
                        <span class="error-message text-red-600 hidden"></span>
                    </div>
                    <!-- Numero de Sedes -->
                    <div class="w-full mb-4">
                        <label for="sedes" class="flex font-semibold gap-2 justify-center items-center mb-4 tracking-[5px]"><i class="bi bi-geo-alt"></i>Sedes</label>
                        <input type="text" id="sedes" name="sedes" class="w-full rounded-md p-2 text-stone-600 font-medium" placeholder="Número de sedes">                      
                        <span class="error-message text-red-600 hidden"></span>
                    </div>
                     <!-- btn -->
                    <button type="submit" id="btn" class="w-full flex items-center justify-center gap-2 font-black hover:scale-110 uppercase hover:text-slate-50 transition-colors text-sm bg-slate-500 mt-5 p-2 rounded-full  tracking-[4px] cursor-pointer">
                    <i class="bi bi-box-arrow-in-right text-purple-800 font-black text-2xl"></i>
                        Registrar
                    </button>                        
                </form>
                <div class="responseMessage"></div>
            </div>
        </section>
    </main>
    <script type="module">
        import { isAuthenticated, clearSession } from '../../../core/auth/session.js';
        import { config } from '../../../core/config.js';

        // 1️⃣ Verificar si hay sesión activa
        if (!isAuthenticated()) {
            // Si no hay token válido, ir al login
            window.location.replace(config.routes.login);
        }

        // 2️⃣ Logout
        const logoutBtn = document.getElementById('logout-btn');
        logoutBtn?.addEventListener('click', () => {
            clearSession();
            window.location.replace(config.routes.login);
        });
    </script>
    <script type="module" src="../../../features/entidades/pages/entidades.ui.js"></script>
</body>
</html>